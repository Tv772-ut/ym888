{% extends "layout.html" %}
{% block content %}
<h2>账单明细</h2>
<form class="row row-cols-lg-auto g-3 align-items-center mb-3">
    <div class="col">
        <input class="form-control" type="text" name="user_id" value="{{ user_id }}" placeholder="用户ID">
    </div>
    <div class="col">
        <input class="form-control" type="text" name="group_id" value="{{ group_id }}" placeholder="群ID">
    </div>
    <div class="col">
        <input class="form-control" type="text" name="category" value="{{ category }}" placeholder="类别">
    </div>
    <div class="col">
        <button class="btn btn-success" type="submit">筛选</button>
    </div>
</form>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>ID</th><th>用户</th><th>群</th><th>金额</th><th>类别</th><th>备注</th><th>时间</th>
        </tr>
    </thead>
    <tbody>
        {% for row in records %}
        <tr>
            <td>{{ row.id }}</td>
            <td>{{ row.user_id }}</td>
            <td>{{ row.group_id }}</td>
            <td>{{ row.amount }}</td>
            <td>{{ row.category }}</td>
            <td>{{ row.note }}</td>
            <td>{{ row.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<nav>
    <ul class="pagination">
        {% for p in range(1, 1 + (total-1)//per_page + 1) %}
        <li class="page-item {% if p == page %}active{% endif %}">
            <a class="page-link" href="?page={{p}}{% if user_id %}&user_id={{user_id}}{% endif %}{% if group_id %}&group_id={{group_id}}{% endif %}{% if category %}&category={{category}}{% endif %}">{{p}}</a>
        </li>
        {% endfor %}
    </ul>
</nav>
{% endblock %}
